{%- capture final_description -%}{% if page.excerpt %}{{ page.excerpt | remove_xml }}{% else %}{{ page.title }}{% endif %}{%- endcapture -%}
{%- capture final_title -%}
  {%- if page.title == "Home" -%}
    {{ site.title }}{% if site.tagline %} &middot; {{ site.tagline }}{% endif %}
  {%- else -%}
    {{ page.title }} &middot; {{ site.title }}
  {%- endif -%}
{%- endcapture -%}

<head>
  <link href="https://gmpg.org/xfn/11" rel="profile" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>{{- final_title -}}</title>

  <!-- CSS -->
  <link rel="stylesheet" href="{{ "/assets/css/main.css" | relative_url }}" />

  <!-- Icons -->
  <link rel="apple-touch-icon" href="{{ "/favicon.png" | relative_url }}" />
  <link rel="shortcut icon" href="{{ "/favicon.ico" | relative_url }}" />

  <link rel="manifest" href="{{ "/manifest.json" | relative_url }}" />

  <meta name="theme-color" content="#0F6EB5" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="{{ site.title }}" />
  <meta name="application-name" content="{{ site.title }}" />

  <meta name="description" content="{{ final_description }}" />

  <meta property="og:title" content="{{- final_title -}}" />
  <meta property="og:locale" content="fr_FR" />
  <meta property="og:description" content="{{ final_description }}" />
  <meta property="og:url" content="{{ site.url }}{{ page.url }}" />
  <meta property="og:site_name" content="j0k3r.net" />
  <meta property="og:type" content="{% if page.date %}article{% else %}website{% endif %}" />

  <meta name="twitter:widgets:csp" content="on" />
  <meta name="twitter:dnt" content="on" />

  {% if page.title %}

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@j0k" />
    <meta name="twitter:creator" content="@j0k" />
    <meta name="twitter:title" content="{{- final_title -}}" />
    <meta name="twitter:description" content="{{ final_description }}" />

    <meta property="article:author" content="https://www.facebook.com/jeremy.benoist" />

    {% if page.tags %}
      <meta property="article:section" content="{% if page.tags != empty %}{{ page.tags[0] }}{% endif %}" />

      {% for tag in page.tags %}
      <meta property="article:tag" content="{{ tag }}" />
      {% endfor %}
    {% endif %}

    {% if page.date %}
      <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}" />
    {% endif %}
  {%- endif -%}

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="{{ site.feed.path | default: 'feed.xml' | relative_url }}" />
</head>
